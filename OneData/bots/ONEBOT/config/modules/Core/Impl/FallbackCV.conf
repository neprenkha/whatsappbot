# OneBot Module: FallbackCV
# Purpose: Configure FallbackCV behavior (console summary + file log + panic log + optional detail trace)
#
# RULES (HARD - MUST FOLLOW):
# - ASCII ONLY: All keys and values must be ASCII-safe (no emoji, no smart quotes).
# - NO RENAME: Do not rename existing keys. Only add new keys when required.
# - APPEND ONLY: Add new keys at the BOTTOM of the MOST RELEVANT SECTION. If no section fits, add a NEW SECTION at bottom.
# - NO DUPLICATE KEYS: Each key must appear only once in this file.
# - KEEP STRUCTURE: Every change MUST stay within this template structure (TITLE BLOCKS + settings).
# - EDIT LOCATION RULE:
#   - If changing an existing setting, edit it INSIDE ITS CURRENT SECTION (do not copy to another section).
#   - If adding a new setting, append it under the correct existing section; do not scatter.
# - COMMENTS:
#   - Use '#' for comments only.
#   - Do not insert long stories; keep comments short and operational.
# - SAFE DEFAULTS:
#   - Do not change defaults unless explicitly required for debugging.
# - FUTURE UPGRADES:
#   - Any new feature MUST be controllable by config keys (on/off) and default to OFF unless required.
#
# TEMPLATE FORMAT (MANDATORY):
# - TITLES MUST BE UPPERCASE
# - EACH SECTION MUST USE THIS EXACT BORDER STYLE:
#   ############################################################
#   # TITLE
#   ############################################################
#   key=value
#
# - SETTINGS LINES MUST BE: key=value (no spaces around '=')
# - Boolean values MUST be 1 or 0

############################################################
# CORE
############################################################
enabled=1
debugLog=1
traceLog=1

############################################################
# GROUPS
############################################################
controlGroupId=120363402608825006@g.us
fallbackGroupId=120363402608825006@g.us
fallbackGroupChatId=120363402608825006@g.us
groupId=120363402608825006@g.us
targetGroupId=120363402608825006@g.us
workGroupId=120363402608825006@g.us

############################################################
# STORAGE
############################################################
ticketType=fallback
ticketStoreSpec=jsonstore:Fallback/tickets
storeSpec=jsonstore:Fallback/tickets
ticketStore=jsonstore:Fallback/tickets

############################################################
# RECEIVE BUFFER (DM -> GROUP)
############################################################
msgBuffer=20
idleMs=60000
burstMs=2500

############################################################
# SEND PIPELINE
############################################################
sendPrefer=outsend,sendout,send
bufferMs=3000
mediaDelayMs=2000

############################################################
# REPLY (GROUP -> DM)
############################################################
hideTicket=1
replySendPrefer=sendout,outsend,send
replyTryOnce=1
replyBypassWindow=1
replyDedupeMs=2500
replyFailHoldMs=1200
strictTicketType=1

############################################################
# REPLY (DEPRECATED - keep for backward compatibility)
############################################################
humanReplyBypass=1
replyEventDedupeMs=5000
replyTextDedupeMs=4000

############################################################
# MEDIA RULES
############################################################
groupCardHideTicket=0
groupMediaHideTicket=1

############################################################
# REPLY MEDIA (CONTROL GROUP -> CUSTOMER)
############################################################
replyMediaBufferMs=1200
replyMediaBatchMax=20
replyMediaGapMs=800
replyMediaDownloadTimeoutMs=60000
replyMediaMaxTries=3
replyMediaRetryBaseMs=900
replyMediaRetryJitterMs=250
replyAudioAsVoice=1
replyVideoAsDocument=0
allowStickyReply=1
stickyTtlSec=900
replyMediaSendPrefer=sendout,outsend,send
forwardMediaSendPrefer=sendout,outsend,send

############################################################
# COMPAT (KEEP OLD KEYS HERE)
############################################################
debug=1
trace=1

############################################################
# DEPRECATED (DO NOT DELETE YET)
############################################################
# (none)

############################################################
# STEP2 ADDITIONS (APPEND ONLY)
############################################################
# Sticky ticket window for burst media (image/document) reply without quote
replyStickyEnabled=1
replyStickyMs=5000
